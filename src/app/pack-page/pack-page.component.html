<app-header></app-header>

<div class="content-wrapper">
  <h4 class="title text-center fw-bold my-3">
    Các gói phim
  </h4>
  <div class="container-md">
    <div class="row row-cols-1 row-cols-md-3 g-2">
      <div *ngFor="let pack of packList; index as idx" class="col">
        <button [disabled]="isPaid() && !isCurrentPack(pack.id)"
          (click)="choosePack(pack.id)"
          [ngClass]="isCurrentPack(pack.id) ? 'focus' : ''"
          class="pack border rounded-1 w-100 p-0">
          <div class="name card-img-top" style="aspect-ratio: 2/1;">
            {{ pack.name }}
          </div>
          <div class="p-2 text-start">
            <div class="m-auto mt-1 text-center">
              {{ pack.price | currency: 'VND' }}
            </div>
            <div>
              {{ pack.description }}
            </div>
            <div>
              Lorem ipsum dolor {{ idx }}
            </div>
            <div>
              Lorem ipsum dolor sit
            </div>
          </div>
        </button>
      </div>
    </div>
  </div>
  <form (submit)="pay()" action="" class="mt-3 ms-auto"
    style="max-width: 20em;">
    <div class="d-flex align-items-center">
      Số tháng:
      <input (blur)="onBlur()" style="width: 5em;" value="1" type="number"
        min="1" max="12" [formControl]="quantityControl" name="quantity"
        class="ms-auto form-control" placeholder="">
    </div>
    <div class="d-flex align-items-center">
      Đến ngày: 
      <div class="ms-auto">
        {{ getExpiredDate() | date:'dd/MM/y' }}
      </div>
    </div>
    <div class="d-flex align-items-center">
      <div class="me-auto">
        Tổng tiền: {{ total() | currency: 'VND' }}
      </div>
      <button *ngIf="isPaid()" (click)="cancel()" type="button" class="btn btn-danger ms-1">
        Hủy gói
      </button>
      <button *ngIf="!isPaid()" class="ms-1 btn btn-warning text-white">
        Thanh toán
      </button>
    </div>
    <span *ngIf="!isPaid()">
      &nbsp;
    </span>
    <div *ngIf="isPaid()">
      <span class="form-wrapper-valid">
        Thanh toán thành công
        <i class="bi bi-check"></i>
      </span>
    </div>
  </form>
</div>

<app-footer></app-footer>